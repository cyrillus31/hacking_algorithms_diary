#### Главный принцип по проектироваю Rest API 
API  не должно содержать глаголов
- api/v2/elements
- ~~api/v2/getElements~~

#### throughput, response time, latency
1.  throughput 
	- Пропускная способность системы
	- Сколько запросов вернется за n времени
2. response time
	1. Сколько занимает полный цикл в системе от захода до возврата
3. latency
	1. ???

#### Почему микросервисы лучше монолитов
Монолит не всегда плох!!!

- Разделение ответственности и изоляция
- Быстрее деплой 
- БД разделяем и повышваем устойчивость и скорость.
		- у каждого свое БД
		- Выше безопасность, так как сервисы не могут спокойно ходить в другие БД

#### Scaling
1. Вертикальное - увеличение мощности
2. Горизонтальное - увеличиваем количество
3. Функциональная декомпозиция - распиливание одной системы на более мелкие (микросервисы). Паттерн strangler fig.

#### Какие виды деплоя?
- Canary deployment: есть 3 пода, 2 остаются со старой версией, а 1 выкатывается с новым функционалом. 
- rolling создается новый ReplicaSet, который постепенно вытесняет старый.
- Blue/Green: одна версия крутится в prod, а вторая на test контуре тестирутеся
	vestion: blue
	docker tag blue

 
 Load Balancer HAProxy && Nginx

Open System Intercommunication Model
Подход, котоырй описывает движение данных по сети с верхнего у ровня до нижнего.

![[Pasted image 20241005131320.png]]

![[Pasted image 20241005131337.png]]

Вариации termination/paththrew

#### Масштабирование БД
Partitioning - в рамках одной БД
Sharding - в рамках разных БД

#### Обеспечение отказоустойчивости БД
Replication


Как будем реплицировать данные:
- По какому-то полю, напрмер updated_at
![[Pasted image 20241005132149.png]]

Какие виды репликаций существуют?
![[Pasted image 20241005132823.png]]
- Синхронная (обновляем запись в двух местах, на основной и на реплике)
- Асинхронная
- Семисинхронная

#### HOT-STANDBY
Если падает мастер, то реплика становится мастером.
![[Pasted image 20241005132717.png]]
Leader election алгоритм выбора реплики.

![[Pasted image 20241005132959.png]]
reloationsl
non-relational
column-oriented
blob/object strorage
time-series
graph database
search engines
key-value
high-availability key-value


#### Для чего нужны поисковые движки?
- Elasticsearch - движо, который хранит данные и позволяет делать быстрый поиск по тексту. Днанные хранятся в JSON-подобном формате
- Sphinx
- Используется inverted index
- Хорошо масштабируется в распределенной системе на множество nodes
- В отличие от GIN/GIST индексов в постгресе быстро обновляются и хорошо работают на больших кусках текста.









